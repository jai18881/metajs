/*
 * MetaJS - MetaPlatform project
 *
 * @author Jiri Hybek <jiri.hybek@cryonix.cz> / Cryonix Innovations <www.cryonix.cz>
 * @license MIT
 */
window.Meta||(window.Meta={}),window.Meta.EventsPrototype={eventListeners:{},on:function(e,t){this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)},off:function(e,t){if(this.eventListeners[e]){var n=this.eventListeners[e].indexOf(t);n>=0&&this.eventListeners[e].splice(n,1)}},fire:function(e,t){if(this.eventListeners[e])for(var n=0;n<this.eventListeners[e].length;n++)this.eventListeners[e][n].call(this,t)}},window.Meta.ObservingProvider=function(e){if(this.addObserver(this),e)for(k in e)this[k]=e[k]},window.Meta.ObservingProvider.prototype=Object.create(window.Meta.EventsPrototype),window.Meta.ObservingProvider.prototype.addObserver=function(e){var t=this;e instanceof Array?Array.observe(e,function(e){for(var n=0;n<e.length;n++){var i=e[n];i.addedCount>0&&i.object[i.index]instanceof Object&&t.addObserver(i.object[i.index])}t.fire("changed",t)}):Object.observe(e,function(e){for(var n=0;n<e.length;n++){var i=e[n];"add"==i.type&&i.object[i.name]instanceof Object&&t.addObserver(i.object[i.name])}t.fire("changed",t)})};