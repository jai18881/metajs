/*
 * MetaJS - MetaPlatform project
 *
 * @author Jiri Hybek <jiri.hybek@cryonix.cz> / Cryonix Innovations <www.cryonix.cz>
 * @license MIT
 */
window.Meta||(window.Meta={}),window.Meta.EventsPrototype={eventListeners:{},on:function(e,t){this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)},off:function(e,t){if(this.eventListeners[e]){var n=this.eventListeners[e].indexOf(t);n>=0&&this.eventListeners[e].splice(n,1)}},fire:function(e,t){if(this.eventListeners[e])for(var n=0;n<this.eventListeners[e].length;n++)this.eventListeners[e][n].call(this,t)}},window.Meta.ObservingProvider=function(e){if(this.addObserver(this,"eventListeners"),e)for(k in e)this[k]=e[k]},window.Meta.ObservingProvider.prototype=Object.create(window.Meta.EventsPrototype),window.Meta.ObservingProvider.prototype.addObserver=function(e,t){var n=this;if(!(e instanceof Function))if(e instanceof Array){Array.observe(e,function(e){for(var t=0;t<e.length;t++){var i=e[t];i.addedCount>0&&i.object[i.index]instanceof Object&&n.addObserver(i.object[i.index])}n.fire("changed",n)});for(var i=0;i<e.length;i++)this.addObserver(e[i])}else if(e instanceof Object){Object.observe(e,function(e){for(var t=0;t<e.length;t++){var i=e[t];"add"==i.type&&i.object[i.name]instanceof Object&&n.addObserver(i.object[i.name])}n.fire("changed",n)});for(var i in e)(t||[]).indexOf(i)<0&&this.addObserver(e[i])}};