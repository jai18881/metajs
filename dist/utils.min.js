/*
 * MetaJS - MetaPlatform project
 *
 * @author Jiri Hybek <jiri.hybek@cryonix.cz> / Cryonix Innovations <www.cryonix.cz>
 * @license MIT
 */
window.Meta||(window.Meta={}),window.Meta.Utils={},window.Meta.config||(window.Meta.config={}),window.Meta.config.importPrefix||(window.Meta.config.importPrefix="%module%.html"),window.Meta.Utils._importedModules=[],window.Meta.Utils["import"]=function(t,n,e){if(window.Meta.Utils._importedModules[t])return n();var r=document.createElement("link");r.rel="import",r.href=window.Meta.config.importPrefix.replace(/\%module\%/g,t),r.onload=function(){window.Meta.Utils._importedModules.push(t),n&&n()},r.onerror=function(n){console.log("Error importing meta module '"+t+"'",n),e&&e(n)},document.head.appendChild(r)},window.Meta.Utils.importMany=function(t,n,e){var r=function(t,n){window.Meta.Utils["import"](t,function(){return n()},function(){return n("Cannot import module '"+t+"'")})};window.Meta.Utils.batch(t,r,function(t){return t?e(t):n()})},window.Meta.Utils.batch=function(t,n,e){var r=-1,o=function(i){return r++,i?e(i):r==t.length?e():void n(t[r],o)};o()},window.Meta.Utils.idHashmap=function(t){for(var n={},e=t.querySelectorAll("*[id]"),r=0;r<e.length;r++)n[e.item(r).getAttribute("id")]=e.item(r);return n},window.Meta.Utils.sanitizeHtml=function(t){var n=new RegExp("<","g"),e=new RegExp("<","g");return String(t).replace(n,"&lt;").replace(e,"&gt;")},window.Meta.Utils.traverse=function(t,n){var e=n.shift();return t[e]?n.length>0?window.Meta.Utils.traverse(t[e],n):t[e]:void 0},window.Meta.Utils.formatDate=function(t,n){var e,r,o=this,i=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],u=/\\?(.?)/gi,a=function(t,n){return r[t]?r[t]():n},c=function(t,n){for(t=String(t);t.length<n;)t="0"+t;return t};return r={d:function(){return c(r.j(),2)},D:function(){return r.l().slice(0,3)},j:function(){return e.getDate()},l:function(){return i[r.w()]+"day"},N:function(){return r.w()||7},S:function(){var t=r.j(),n=t%10;return 3>=n&&1==parseInt(t%100/10,10)&&(n=0),["st","nd","rd"][n-1]||"th"},w:function(){return e.getDay()},z:function(){var t=new Date(r.Y(),r.n()-1,r.j()),n=new Date(r.Y(),0,1);return Math.round((t-n)/864e5)},W:function(){var t=new Date(r.Y(),r.n()-1,r.j()-r.N()+3),n=new Date(t.getFullYear(),0,4);return c(1+Math.round((t-n)/864e5/7),2)},F:function(){return i[6+r.n()]},m:function(){return c(r.n(),2)},M:function(){return r.F().slice(0,3)},n:function(){return e.getMonth()+1},t:function(){return new Date(r.Y(),r.n(),0).getDate()},L:function(){var t=r.Y();return t%4===0&t%100!==0|t%400===0},o:function(){var t=r.n(),n=r.W(),e=r.Y();return e+(12===t&&9>n?1:1===t&&n>9?-1:0)},Y:function(){return e.getFullYear()},y:function(){return r.Y().toString().slice(-2)},a:function(){return e.getHours()>11?"pm":"am"},A:function(){return r.a().toUpperCase()},B:function(){var t=3600*e.getUTCHours(),n=60*e.getUTCMinutes(),r=e.getUTCSeconds();return c(Math.floor((t+n+r+3600)/86.4)%1e3,3)},g:function(){return r.G()%12||12},G:function(){return e.getHours()},h:function(){return c(r.g(),2)},H:function(){return c(r.G(),2)},i:function(){return c(e.getMinutes(),2)},s:function(){return c(e.getSeconds(),2)},u:function(){return c(1e3*e.getMilliseconds(),6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)"},I:function(){var t=new Date(r.Y(),0),n=Date.UTC(r.Y(),0),e=new Date(r.Y(),6),o=Date.UTC(r.Y(),6);return t-n!==e-o?1:0},O:function(){var t=e.getTimezoneOffset(),n=Math.abs(t);return(t>0?"-":"+")+c(100*Math.floor(n/60)+n%60,4)},P:function(){var t=r.O();return t.substr(0,3)+":"+t.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-e.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(u,a)},r:function(){return"D, d M Y H:i:s O".replace(u,a)},U:function(){return e/1e3|0}},this.date=function(t,n){return o=this,e=void 0===n?new Date:new Date(n instanceof Date?n:1e3*n),t.replace(u,a)},this.date(t,n)};