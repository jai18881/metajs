<html>

	<template is="meta-view" name="com.example.todo.ListActivity">

		<style>

			* {
				margin: 0px;
				padding: 0px;
			}

			:host {
				display: block;
				font-size: 14px;
				padding: 20px;
			}

			h2 {
				color: #2196F3;
				font-weight: 300;
				font-size: 22px;
				margin-bottom: 10px;
				padding-left: 12px;
			}

			ul {
				list-style: none;
				margin-bottom: 10px;
			}

			ul li {
				padding: 10px 12px;
				cursor: pointer;
				margin-bottom: 2px;
				border-radius: 3px;
				line-height: 14px;
			}

			ul li:hover {
				background: #f3f3f3;
			}

			ul li[selected],
			ul li[selected]:hover {
				background: #2196F3;
				color: #ffffff;
			}

			ul li .remove {
				display: none;
				float: right;
				color: #ff0000;
				cursor: pointer;
				font-size: 12px;
			}

			ul li[selected] .remove {
				color: #ffffff;
			}

			ul li:hover .remove {
				display: inline-block;
			}

			ul li .remove:hover {
				text-decoration: underline;
			}

			.add {
				padding: 0px;
			}

			.add input {
				border: 0px none;
				background: #ffffff;
				padding: 10px;
				box-sizing: border-box;
				width: 100%;
				border-bottom: 1px solid #cccccc;
			}

		</style>

		<h2>To-do lists</h2>

		<ul class="lists">
			<li>
				<span class="remove">Remove</span>
				<span class="name"></span>
			</li>
		</ul>

		<p class="add">
			<input type="text" id="name" name="list_name" placeholder="Add new list" />
		</p>

	</template>

	<script type="text/javascript">

		Meta.Activity('com.example.todo.ListActivity', {

			view: 'com.example.todo.ListActivity',

			onCreate: function(self){

				this.model.lists = [];
				this.model.activeList;

			},

			setLists: function(lists){

				this.model.lists = lists;
				this.render();

			},

			setActiveList: function(todoList){

				this.model.activeList = todoList;
				this.render();

			},

			events: {
				
				"click .lists li": function(ev){

					this.fragment.fireEvent("selectList", { todoList: ev.sender._model });

				},

				"click .lists li .remove": function(ev){

					ev.stopPropagation();
					this.fragment.fireEvent("removeList", { todoList: ev.sender.parentElement._model });

				},

				"keypress #name": function(ev){

					if(ev.which != 13) return;
					if(this.$.name.value == "") return;

					this.fragment.fireEvent("addList", { listName: this.$.name.value });

				}

			},

			bindings: {
				".lists li@??selected": function(model){
					return ( this._model == model.activeList ? true : false );
				}
			}

		});

	</script>

</html>